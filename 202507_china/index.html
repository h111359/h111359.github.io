<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Gallery — Multiple Events</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <header class="hdr">
      <h1>Пътуване до Китай - юли 2025</h1>
      <div class="meta">Едно пътешествие на семейство Христови</div>
    </header>

    <nav class="nav" aria-label="Events">
      <div class="tabs" id="tabs" role="tablist" aria-label="Event tabs">
        <!-- tabs injected by app.js -->
        <noscript>Enable JavaScript to see event tabs.</noscript>
      </div>
      <div class="select-wrap">
        <label for="eventSelect" class="sr-only" style="position:absolute;left:-9999px">Select event</label>
        <select id="eventSelect" class="select"></select>
      </div>
    </nav>

    <div class="toolbar">
      <div class="search"><input id="q" type="search" placeholder="Filter by filename or text…" aria-label="Filter items"></div>
      <div class="counts" id="counts">Loading…</div>
      <div class="hint">Tip: Press Esc to close the viewer.</div>
    </div>

    <main class="grid" id="grid" aria-live="polite"></main>
  </div>

  <!-- Lightbox -->
  <div class="lightbox" id="lightbox" role="dialog" aria-modal="true" aria-label="Viewer">
    <button class="close" id="closeBtn" title="Close (Esc)">Close</button>
    <div class="lb-body" id="lbBody"></div>
    <div class="lb-caption" id="lbCaption"></div>
  </div>

  <noscript>
    <div style="padding:12px;margin:16px;background:#fee2e2;color:#991b1b;border-radius:8px">
      JavaScript is required to show the gallery. Please enable it.
    </div>
  </noscript>

  <!-- 1) event registry, 2) app logic -->
  <script src="data/events.js" charset="utf-8" defer></script>
  <script src="app.js" charset="utf-8" defer></script>

  <!-- Fallback message if app.js isn’t present yet -->
  <script>
    window.addEventListener('DOMContentLoaded', function(){
      setTimeout(function(){
        if (!document.getElementById('tabs').children.length) {
          const grid = document.getElementById('grid');
          const msg = document.createElement('div');
          msg.style.cssText = 'padding:12px;border:1px solid #374151;border-radius:12px;background:#111827;color:#e5e7eb';
          msg.innerHTML = 'App script not loaded yet. Continue to Step 3 to add <code>app.js</code>.';
          grid.appendChild(msg);
        }
      }, 300);
    });
  </script>
</body>
</html>
